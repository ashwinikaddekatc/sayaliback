<ol class="breadcrumb breadcrumb-arrow font-trirong">
  <li><a href="javascript://" [routerLink]="['/cns-portal/dashboard/order']"> <clr-icon shape="home"></clr-icon></a></li>
  <li><a href="javascript://"> <clr-icon shape="flag"></clr-icon> Issues Type</a></li>
</ol>
<br>

<div class="dg-wrapper">
  <div>
      <b>PROJECT NAME</b>&nbsp;
      <span class="label label-light-green p7" style="margin-top: .4em; display: inline; cursor: pointer;" (click)="getboard()">switch</span>
  </div>

  <clr-tabs>
      <clr-tab>
         <button clrTabLink>Board</button>
          <clr-tab-content *clrIfActive>
              <div>
                  <br/>
                  <div class="clr-row">
                      <div class="clr-col-8">
                        <h3> Board Rules </h3>
                      </div>
                      <div class="clr-col-4" style="text-align: right;">

                        <button class="btn btn-outline" (click)="onExport()" >
                          <clr-icon shape="export" ></clr-icon> xlsx
                        </button>
                        <button type="submit" id="add" class="btn btn-primary" (click)="goToAddBoard()" >
                          <clr-icon shape="plus"></clr-icon>ADD
                        </button>
                      </div>
                    </div>
                  <clr-datagrid [clrDgLoading]="loading" [(clrDgSelected)]="selected">
                      <clr-dg-placeholder><clr-spinner [clrMedium]="true">Loading ...</clr-spinner></clr-dg-placeholder>
                      <!-- Column Name -->
                      <clr-dg-column [clrDgField]="'name'">
                          <ng-container  *clrDgHideableColumn="{hidden: false}">
                           Name
                          </ng-container>
                      </clr-dg-column>
                      <clr-dg-column [clrDgField]="'description'">
                          <ng-container *clrDgHideableColumn="{hidden: false}">
                              Description
                          </ng-container>
                      </clr-dg-column>

                      <!-- Row data -->
                      <clr-dg-row *clrDgItems="let user of allrule" [clrDgItem]="user" >
                          <clr-dg-cell>{{user.name}}</clr-dg-cell>
                          <clr-dg-cell>{{user.description}}</clr-dg-cell>

                          <clr-dg-action-overflow>
                              <button class="action-item" (click)="gotoedit(user)">Edit</button>
                              <button class="action-item" (click)="deletemodal(user)">Delete</button>
                          </clr-dg-action-overflow>
                          <clr-dg-row-detail *clrIfExpanded>
                            <table class="table">
                              <tr>
                                <td class="td-title">name: </td>
                                <td class="td-content">{{user.name}}</td>
                              </tr>


                            </table>
                          </clr-dg-row-detail>

                      </clr-dg-row>


                      <!-- Pagination -->
                      <clr-dg-footer>
                          <clr-dg-pagination #pagination [clrDgPageSize]="10">
                              <clr-dg-page-size [clrPageSizeOptions]="[10,20,50,100]">Users per page</clr-dg-page-size>
                              {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
                              of {{pagination.totalItems}} users
                          </clr-dg-pagination>
                      </clr-dg-footer>
                  </clr-datagrid>
              </div>
          </clr-tab-content>
      </clr-tab>
      <clr-tab>
          <button clrTabLink>Global</button>
          <clr-tab-content *clrIfActive>
              <div>
                  <br/>
                  <div class="clr-row">
                      <div class="clr-col-8">
                        <h3>Global Rules </h3>
                      </div>
                      <div class="clr-col-4" style="text-align: right;">

                        <button class="btn btn-outline" (click)="onExport()">
                          <clr-icon shape="export"></clr-icon> xlsx
                        </button>
                        <button id="add" class="btn btn-primary" (click)="goToAdd()">
                          <clr-icon shape="plus"></clr-icon>ADD
                        </button>
                      </div>
                    </div>
                  <clr-datagrid [clrDgLoading]="loading" [(clrDgSelected)]="selected">
                      <clr-dg-placeholder>data not found!</clr-dg-placeholder>
                      <!-- Column Name -->
                      <clr-dg-column>
                          <ng-container *clrDgHideableColumn="{hidden: false}">
                           Name
                          </ng-container>
                      </clr-dg-column>
                      <clr-dg-column>
                          <ng-container *clrDgHideableColumn="{hidden: false}">
                              Description
                          </ng-container>
                      </clr-dg-column>

                      <!-- Row data -->
                      <clr-dg-row [clrDgItem] >
                          <clr-dg-cell>name</clr-dg-cell>
                          <clr-dg-cell>name Description</clr-dg-cell>

                          <clr-dg-action-overflow>
                              <button class="action-item">Edit</button>
                              <button class="action-item">Delete</button>
                          </clr-dg-action-overflow>
                          <clr-dg-row-detail *clrIfExpanded>
                              hello
                          </clr-dg-row-detail>

                      </clr-dg-row>


                      <!-- Pagination -->
                      <clr-dg-footer>
                          <clr-dg-pagination #pagination [clrDgPageSize]="10">
                              <clr-dg-page-size [clrPageSizeOptions]="[10,20,50,100]">Users per page</clr-dg-page-size>
                              {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
                              of {{pagination.totalItems}} users
                          </clr-dg-pagination>
                      </clr-dg-footer>
                  </clr-datagrid>
              </div>
          </clr-tab-content>
      </clr-tab>
  </clr-tabs>
</div>

<clr-modal [(clrModalOpen)]="getallboardmodal" [clrModalSize]="'lg'">
  <h3 class="modal-title"><b>Select From List:</b></h3>
  <div class="modal-body">
    <div class="clr-row">
      <div class="clr-col-md-12 clr-col-sm-12" style="margin-top: 8px;">
          <input  type="text" placeholder="Enter search Criteria" class="clr-input" name="searchpmodtext">
       </div>
      </div>
     <clr-datagrid [clrDgLoading]="loading">
      <clr-dg-placeholder><clr-spinner [clrMedium]="true">Loading ...</clr-spinner></clr-dg-placeholder>
      <clr-dg-column [clrDgField]="'bId'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Board Id
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'bName'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Board Name
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'project_id'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Project Id
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'type'"><ng-container *clrDgHideableColumn="{hidden: false}">
          Type
        </ng-container></clr-dg-column >
      <clr-dg-row *clrDgItems="let user of boarddata;let i = index" [clrDgItem]="user">
        <clr-dg-cell (click)="getboardid(user.bId)" style="color: rgb(108, 108, 194);">{{user.bId}}</clr-dg-cell>
        <clr-dg-cell>{{user.bName}}</clr-dg-cell>
        <clr-dg-cell>{{user.project_id}}</clr-dg-cell>
        <clr-dg-cell>{{user.type}}</clr-dg-cell>
        <clr-dg-row-detail *clrIfExpanded>
          <table class="table">
            <tr>
              <td class="td-title">type</td>
              <td class="td-content">{{user.type}}</td>
            </tr>
            </table>
        </clr-dg-row-detail>
      </clr-dg-row>
      <clr-dg-footer>
       <clr-dg-pagination #pagination [clrDgPageSize]="10">
      <clr-dg-page-size [clrPageSizeOptions]="[10,20,50,100]">Records per page</clr-dg-page-size>
      {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
      of {{pagination.totalItems}} Records
    </clr-dg-pagination>
   </clr-dg-footer>
    </clr-datagrid>
  </div>
</clr-modal>

<clr-modal [(clrModalOpen)]="modaldelete" [clrModalSize]="'lg'" [clrModalStaticBackdrop]="true">

  <div class="modal-body">
    <h1 class="delete">Are You Sure Want to delete?</h1>
    <h2 class="heading">{{rowSelected.id}}</h2>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline" (click)="modaldelete = false">Cancel</button>
    <button type="submit" (click)="deleteboard(rowSelected.id)" class="btn btn-primary" >Delete</button>
    </div>
  </div>
</clr-modal>
<!-- <clr-modal [(clrModalOpen)]="modaladd" [clrModalSize]="'lg'" [clrModalStaticBackdrop]="true">
  <h3 class="modal-title">Create A Issues Types</h3>
  <div class="modal-body">
        <form [formGroup]="entryForm" (ngSubmit)="onSubmit()">
      <div class="clr-row">
        <div class="clr-col-md-6 clr-col-sm-12">
          <label for="name">Name<span class="required-field">*</span></label>
         <input type="text" class="clr-input" formControlName="name">
        </div>
        <div class="clr-col-md-6 clr-col-sm-12">
          <label for="name">Description<span class="required-field">*</span></label>
         <input type="text" class="clr-input" formControlName="description">
        </div>
      </div>
      <br>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="modaladd = false">Cancel</button>
        <button type="submit" class="btn btn-primary" >ADD</button>
        </div>
</form>
  </div>

</clr-modal> -->
<clr-modal [(clrModalOpen)]="modaledit" [clrModalSize]="'lg'" [clrModalStaticBackdrop]="true">
  <h3 class="modal-title">Edit A Issues Types</h3>
  <div class="modal-body" *ngIf="rowSelected.id">
    <h2 class="heading">{{rowSelected.id}}</h2>
        <form (ngSubmit)="onUpdate(rowSelected.id)">
      <div class="clr-row">
        <div class="clr-col-md-6 clr-col-sm-12">
          <label for="name">Name<span class="required-field">*</span></label>
         <input type="text" class="clr-input"  name="name" [(ngModel)]="rowSelected.name">
        </div>
        <div class="clr-col-md-6 clr-col-sm-12">
          <label for="name">Description<span class="required-field">*</span></label>
         <input type="text" class="clr-input" name="description"  [(ngModel)]="rowSelected.description">
        </div>
      </div>
      <br>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="modaledit = false">Cancel</button>
        <button type="submit" class="btn btn-primary" >UPDATE</button>
        </div>
</form>
  </div>

</clr-modal>
<clr-modal [(clrModalOpen)]="modalAdd" [clrModalSize]="'lg'" [clrModalStaticBackdrop]="true">
  <h3 class="modal-title">Create A Issues Types</h3>
  <div class="modal-body">

    <form [formGroup]="entryForm" (ngSubmit)="onSubmit()">

      <table class="table" formArrayName="Sec_type" >
        <thead>
            <tr>
                <th class="left" style="width:125px;">name</th>
                <th class="left" style="width:125px;">description</th>
                <th class="right" style="width:125px;">{{ controls.length > 1 ? 'Actions' : '' }}</th>
            </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of controls; let i=index" [formGroupName]="i">
              <td class="left">
                  <input colspan="2" type="text"  class="clr-input" name="productname" formControlName="name" class="clr-input"
                      placeholder="Enter  name" />
              </td>
              <td class="left">
                  <input colspan="2" type="text" class="clr-input" name="quantity" formControlName="description" class="clr-input"
                      placeholder="Enter description" />
              </td>
                <td >
                  <a *ngIf="controls.length > 1" (click)="onRemoveLines(i)">
                      <clr-icon shape="trash" class="is-error"></clr-icon>
                  </a>
              </td>
          </tr>
      </tbody>
      <button type="button" class="btn btn-primary button1" (click)="onAddLines()">
        <clr-icon shape="plus"></clr-icon>
    </button>
      </table>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="modalAdd = false">Cancel</button>
        <button type="submit" class="btn btn-primary">Add</button>
      </div>

    </form>

  </div>

</clr-modal>
