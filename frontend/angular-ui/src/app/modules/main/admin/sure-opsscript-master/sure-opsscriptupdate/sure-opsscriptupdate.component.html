<div class="root">
  <h4 style="font-weight: 500;display: inline;">Script Group-{{scriptname}}</h4>
    <!-- SureOps Script Master Workflow</h4> -->
    <div style="width:100% ;display: flex;">
        <div style="float:left;">
            <button id="add1" class="btn topbutton" style="background-color: #5f57d2; border: none;" (click)="workflowmodalOPen(1)">
                <clr-icon shape="plus" style="fill:whitesmoke !important;"></clr-icon>CUSTOM
            </button>
            <button id="add2" class="btn topbutton" style="background-color: #5f57d2; border: none;" (click)="navi()">
              <clr-icon shape="plus" style="fill:whitesmoke !important;"></clr-icon> SCRIPTMASTER
            </button>
            <!-- <button id="add3" class="btn topbutton" style="background-color: #5f57d2; border: none;" (click)="workflowmodalOPen(3)">
              <clr-icon shape="plus" style="fill:whitesmoke !important;"></clr-icon> CREATE FILE
           </button>
           <button id="add3" class="btn topbutton" style="background-color: #5f57d2; border: none;" (click)="workflowmodalOPen(4)">
            <clr-icon shape="plus" style="fill:whitesmoke !important;"></clr-icon> DECISION BOX
          </button>
          <button id="add3" class="btn topbutton" style="background-color: #5f57d2; border: none;" (click)="workflowmodalOPen(5)">
            <clr-icon shape="plus" style="fill:whitesmoke !important;"></clr-icon> WORKFLOW
          </button>
          <button id="add3" class="btn topbutton" style="background-color: #5f57d2; border: none;" (click)="workflowmodalOPen(6)">
            <clr-icon shape="plus" style="fill:whitesmoke !important;"></clr-icon> SCRIPT1
          </button> -->
        </div>
    </div>
    <div class="clr-row">
      <div class="clr-col-sm-6">
          <label for="workflow">Script Master </label>
          <!-- <select colspan="2"  class="clr-dropdown" (change)="onch($event.target.value)">
            <option *ngFor="let sub of scriptdata" [value]="sub.script_name">{{sub.script_name}}
            </option>
        </select> -->
        <select colspan="2"  class="clr-dropdown" (change)="onSubmit1($event.target.value)">
          <option *ngFor="let sub of scriptdata" [value]="sub.script_name">{{sub.script_name}}
          </option>
      </select>

      </div>
      <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 17px;">
        <button class="btn topbutton" style="background-color: #03AC13; border: none;" (click)="workflowmodalOPen(7)">
          <clr-icon shape="plus" style="fill:whitesmoke !important;"></clr-icon>Add</button>

      </div>

  </div>
    <div style="width: 100%;">
        <div class="board-wrapper">
          <div class="board-column" >
              <div class="clr-row" style="margin-right: 0px!important;">
                  <div class="clr-col-12">
                      <div class="column-title">
                        <b >Start</b>
                      </div>
                  </div>
              </div>

              <div style="border: 4px solid #70f3cf !important;margin-bottom: 15px; padding-left: 0px !important; padding-right: 0px !important;">
              </div>

              <div class="tasks-container">
                <div class="task" (click)="onClick(item)" *ngFor="let item of workflowdata" style="border-left: red;border-style: solid;border-top: none;border-right: none;">
                  <span>{{item.title}}</span>
                </div>
              </div>

              <div style="border: 4px solid red !important;margin-bottom: 15px; padding-left: 0px !important; padding-right: 0px !important;">
              </div>

              <div class="clr-row" style="margin-right: 0px!important;">
                <div class="clr-col-12">
                    <div class="column-end">
                      <b >End</b>
                    </div>
                </div>
              </div>

            </div>
        </div> <!-- Board Wrapper -->


        <div class="workflowform" [hidden]="!hideme[modelid]" >
         <span (click)="closeForm()" style="text-align: right;cursor: pointer;"><clr-icon shape="times"></clr-icon></span>
            <form [formGroup]="nodeEntryForm" (ngSubmit)="nodeAdd(modelid)" style="margin: 15px;">
              <span (click)="delNode(modelid)" class="action-item"><clr-icon shape="trash" class="is-error" style="margin-right: 15px;margin-top: 0px;cursor: pointer; float: right;"></clr-icon></span>
              <h4 style="font-weight: 500;margin-left: 15px;">Edit Properties</h4>
              <span style="margin-left: 15px;">ID # {{modelid}}</span><br>
              <span style="margin-left: 15px;">Type : {{processType}}</span><br>
              <div class="clr-row">
                <div class="clr-col-12">
                    <label for="sequence">Sequence</label>
                    <input type="text"  formControlName="sequence" placeholder="Enter sequence no" class="clr-input"  [(ngModel)]="nodeEditProperties.sequence">
                </div>
              </div>
              <div class="clr-row">
                  <div class="clr-col-12">
                      <label for="title">Title</label>
                      <input type="text" id="title" formControlName="title" placeholder="Enter Title" class="clr-input"  [(ngModel)]="nodeEditProperties.title">
                  </div>
              </div>
              <div class="clr-row">
                  <div class="clr-col-12">
                      <label for="description">Description</label>
                      <textarea cols="10" rows="2" formControlName="description"  [(ngModel)]="nodeEditProperties.description" placeholder="Enter Description"></textarea>
                  </div>
              </div>
              <div class="clr-row">
                <div class="clr-col-12" *ngIf="processType == 'Initialize'">
                    <label for="title">A URI</label>
                    <input type="text" id="title" formControlName="a_uri" placeholder="www://example.com" class="clr-input"  [(ngModel)]="nodeEditProperties.a_uri">
                </div>
              </div>
              <div class="clr-row">
                <div class="clr-col-12" *ngIf="processType == 'Initialize'">
                    <label for="title">B URI</label>
                    <input type="text" id="title" formControlName="b_uri" placeholder="www://example.com" class="clr-input"  [(ngModel)]="nodeEditProperties.b_uri">
                </div>
            </div>
              <div class="clr-row">
                <div class="clr-col-12">
                    <label for="script">Script</label>
                    <textarea cols="10" rows="6" formControlName="script" [(ngModel)]="nodeEditProperties.script" placeholder="Enter script"></textarea>
                </div>
              </div>
              <div class="clr-row">
                <div class="clr-col-12"  *ngIf="processType == 'Initialize'">
                    <label for="variables">Variables</label>
                    <textarea cols="10" rows="4" formControlName="variables" [(ngModel)]="nodeEditProperties.variables" placeholder="Enter variables"></textarea>
                </div>
              </div>
              <div class="clr-row" *ngIf="processType == 'Create File'">
                  <div class="clr-col-12">
                      <label for="title">Create File</label>
                      <select colspan="2" class="clr-dropdown" formControlName="file" [(ngModel)]="nodeEditProperties.file">
                          <option selected>Shell Script</option>
                          <option>Docker File</option>
                          <option>Yamel File</option>
                          <option>Others</option>
                      </select>
                  </div>
              </div>
              <div class="clr-row" *ngIf="processType == 'Create File'">
                <div class="clr-col-12">
                    <label for="title">Name</label>
                    <input type="text" id="name" formControlName="name" placeholder="Enter file Name" class="clr-input"  [(ngModel)]="nodeEditProperties.name">
                  </div>
            </div>
              <div class="clr-row" *ngIf="processType == 'Create File'">
                  <div class="clr-col-12">
                      <label for="title">Action</label>
                      <textarea cols="10" rows="5" formControlName="action" [(ngModel)]="nodeEditProperties.action" placeholder="Action"></textarea>
                  </div>
              </div>

              <div class="clr-row" *ngIf="processType == 'Create File'">
                  <div class="clr-col-12">
                      <label for="destination">Destination</label>
                      <input type="text" id="destination" formControlName="destination" placeholder="Enter destination" class="clr-input"  [(ngModel)]="nodeEditProperties.destination">
                  </div>
              </div>
              <div class="clr-row" *ngIf="processType == 'Decision Box'">
                  <div class="clr-col-12">
                      <label for="ifcondition">If </label>
                      <input type="text" id="ifcondition" formControlName="ifcondition" placeholder="If Condition" class="clr-input"  [(ngModel)]="nodeEditProperties.ifcondition">
                  </div>
              </div>
              <div class="clr-row" *ngIf="processType == 'Decision Box'">
                  <div class="clr-col-12">
                      <label for="else1">else 1</label>
                      <input type="text" id="else1" formControlName="else1" placeholder="Else condition" class="clr-input"  [(ngModel)]="nodeEditProperties.else1">
                  </div>
              </div>
              <div class="clr-row" *ngIf="processType == 'Decision Box'">
                  <div class="clr-col-12">
                      <label for="else2">else 2</label>
                      <input type="text" id="else2" formControlName="else2" placeholder="Else condition" class="clr-input"  [(ngModel)]="nodeEditProperties.else2">
                  </div>
              </div>
              <div class="clr-row" *ngIf="processType == 'Decision Box'">
                  <div class="clr-col-12">
                      <label for="destination">else 3</label>
                      <input type="text" id="else3" formControlName="else3" placeholder="else condition" class="clr-input"  [(ngModel)]="nodeEditProperties.destination">
                  </div>
              </div>

              <div class="clr-row" *ngIf="processType == 'Workflow'">
                <div class="clr-col-sm-6">
                    <label for="workflow">Workflow</label>
                    <select colspan="2" formControlName="workflow" [(ngModel)]="nodeEditProperties.workflow" class="clr-dropdown" (change)=" workflowmod($event.target.value)">
                        <option *ngFor="let sub of workflow_data;let i=index" [value]="sub.id">{{sub.workflow_name}}</option>
                    </select>
                </div>
                <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 25px;">
                  <button style="margin-right: 5px;" (click)="openvmodal()">V</button>

                </div>

            </div>
              <!-- <div class="clr-row">
                  <div class="clr-col-12">
                    <input type="checkbox" id="active" formControlName="active" value="option1" class="clr-toggle">
                    <label for="active" >Active</label>
                  </div>
              </div> -->

              <div class="clr-form-control">
                  <div class="clr-control-container">
                      <div class="clr-toggle-wrapper">
                        <input type="checkbox" id="active" formControlName="active" [checked]="true" class="clr-toggle">
                        <label for="active" class="clr-control-label">Active</label>
                      </div>
                      <!-- <div class="clr-toggle-wrapper">
                        <input type="checkbox" id="status" formControlName="status" [(ngModel)]="nodeEditProperties.status" class="clr-toggle">
                        <label for="status" class="clr-control-label">Status</label>
                      </div> -->
                  </div>
              </div>

              <div class="modal-footer">
                <!-- <button type="button" class="btn btn-outline" (click)="workflowmodal = false">Cancel</button> -->
                <button type="submit" class="btn btn-primary">Add</button>
              </div>
            </form>
        </div>
    </div>
    <div style="text-align: center;">
        <button type="submit" class="btn btn-primary btn-adddata "   (click)="UpdateLine()" >
          <b>Update</b>
        </button>
    </div>
</div>

<clr-modal [(clrModalOpen)]="workflowmodal" [clrModalStaticBackdrop]="true">
    <h3 class="modal-title">Add Node</h3>
    <div class="modal-body">

      <!-- <form clrForm> -->
      <form [formGroup]="entryForm" (ngSubmit)="onSubmit()" >
        <div class="clr-row" >
          <div class="clr-col-sm-12">
            <span>Type</span>
            <input type="text" class="clr-input" formControlName="type" name="type" id="type" [(ngModel)]="type" readonly style="border:none ;">
          </div>
        </div>
        <div class="clr-row" >
          <div class="clr-col-sm-12">
            <label for="title">Id</label>
            <input type="text" class="clr-input" formControlName="id" id="id">
          </div>
        </div>
        <!-- <div class="clr-row">
          <div class="clr-col-sm-12">
            <label for="title">Title</label>
            <input id="title" type="text" formControlName="title" class="clr-input" >
          </div>
        </div> -->

        <!-- <div class="clr-row">
          <div class="clr-col-12">
              <label for="type">Type</label>
              <select colspan="2" formControlName="type" class="clr-dropdown">
                  <option value="process 1">Process 1</option>
                  <option value="process 2">Process 2</option>
                  <option value="process 3">Process 3</option>
              </select>
          </div>
        </div> -->

        <div class="modal-footer">
          <button type="button" class="btn btn-outline" (click)="workflowmodal = false">Cancel</button>
          <!-- <button type="submit" class="btn btn-primary" (click)="addWorkflowDb()">Add</button> -->
          <button type="submit" class="btn btn-primary">Add</button>
        </div>

      </form>
    </div>
</clr-modal>
