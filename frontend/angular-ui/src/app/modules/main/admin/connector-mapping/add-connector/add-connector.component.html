<ol class="breadcrumb breadcrumb-arrow font-trirong">
  <li><a href="javascript://" [routerLink]="['/cns-portal/dashboard/order']"> <clr-icon shape="home"></clr-icon></a></li>
  <li><a href="javascript://"> <clr-icon shape="flag"></clr-icon> Connector Mapping</a></li>
</ol>
<br>

<div class="clr-row">
  <div class="clr-col-6" style="display:flex ;">
    <div style="margin-right: 25px;">    <h4>Connector Mappings </h4>
     </div>
     <div style="text-align: right;">
      <button type="submit" class="btn btn-icon btn-primary" (click)="postjson()">Post Json</button>
  </div>
  <div style="text-align: right;">
    <button type="submit" class="btn btn-icon btn-primary" (click)="getjson()">Get Json</button>
</div> <div style="text-align: right;">
  <button type="submit" class="btn btn-icon btn-primary">Table Fileds</button>
</div>
    <!-- <div style="margin-top:27px ; position: relative;">
      <span class="label label-light-blue" style="display: inline;">Edit Mode</span>
    </div> -->
  </div>
</div>
<hr>

<div class="container">
    <div class="clr-row">
        <div class="clr-col-md-6 clr-col-sm-12" [hidden]="!postv">
            <form [formGroup]="postModelForm">
                <label for="postapi" style="display: block; float:left;">Post Json Model</label>
                <div style="text-align: right;">
                    <label>Prefix</label>
                    <input type="text" class="clr-input" style="width: 35%; margin-left: 6px;">
                </div>
                <!-- <textarea rows="3" id="" cols="10" (blur)="blurEvent($event)" formControlName="postapi"></textarea> -->
                <textarea rows="3" id="" cols="10"  formControlName="mappingString"></textarea>
                <div style="text-align: right;">
                    <button type="submit" class="btn btn-icon btn-primary" (click)="reloadPostApi()" >Extract </button>
                </div>
            </form>
        </div>

        <div class="clr-col-md-6 clr-col-sm-12" [hidden]="!getv">
            <form [formGroup]="getModelForm">
                <label for="getapi" style="display:block; float: left;">Get Json Model</label>
                <div style="text-align: right;">
                    <label>Prefix</label>
                    <input type="text" class="clr-input" style="width: 35%; margin-left: 6px;">
                </div>
                <textarea cols="10" rows="3" formControlName="mappingString"></textarea>
                <div style="text-align: right;">
                    <button type="submit" class="btn btn-icon btn-primary" (click)="reloadgetFields()">Extract </button>
                </div>
            </form>
        </div>
    </div>
    <hr>
  <form  [formGroup]="entryForm">
      <div class="clr-row">
          <div class="clr-col-md-6 clr-col-sm-12">
              <label>Name<span class="required-field">*</span></label>
              <input type="text" formControlName="name" class="clr-input" required>

          </div>


        </div>


      <div class="clr-row fieldWrapper" >
          <div class="clr-col-12">
              <table class="table table-striped table-bordered" style="margin-top: 0px;" formArrayName="connector_json">
                  <thead>
                      <tr>
                          <th>Post Fields</th>
                          <th>Null</th>
                          <th>Sample Format</th>
                          <th>Mapped Fields</th>
                          <th>Dest Format</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr  *ngFor="let person of serverData; let personIndex = index" [formGroupName]="personIndex">
                          <td ><input type="text" formControlName="fieldname"  class="clr-input" style="border: none;margin: 0px;padding: 10px 10px;" readonly/> </td>
                          <td><input type="checkbox" formControlName="checkboxval" (click)="checkboxreadonly(personIndex)"></td>
                          <td><input type="text" id="sample" formControlName="sample_format" class="clr-input" style="width: 194px;margin: 0px;padding: 10px 10px;"/></td>
                          <td> <div *ngIf="getcolfields">
                            <select colspan="2" id="mapped" formControlName="mapped_fields" class="clr-dropdown" style="width: 194px;margin: 0px;padding: 2px 5px;">
                                <option selected>Select Values</option>
                                <option *ngFor="let sub of listgetapi" [value]="sub">{{sub}}</option>
                           </select> </div>
                          </td>
                          <td><input type="text" formControlName="dest_format" class="clr-input" style="width: 194px;margin: 0px;padding: 10px 10px;"/></td>
                      </tr>

                  </tbody>
              </table>
          </div>
          <!-- <div class="clr-col-md-3 clr-col-sm-12">
              <div class="postColumn" >
                  <div class="colName">
                      <b>Get Fields</b>
                  </div>
                  <hr>
                  <div *ngIf="getcolfields">
                      <div class="colfields" *ngFor="let item of listgetapi;let i= index;">
                          <div [dndDraggable]="item"  [dndEffectAllowed]="'copy'" (dndMoved)="onDragged(item, listgetapi, 'copy')" (dndEnd)="onDragEnd($event)" style="cursor: pointer;">{{item.names}}</div>
                      </div>
                  </div>
              </div>
          </div> -->
      </div>

      <div class="center">
          <button type="submit" class="btn btn-primary" [disabled]="entryForm.invalid" (click)="onSubmit()">SUBMIT</button>
      </div>
</form>
</div>


<!-- <ng-template #recursiveList let-list>
                              <div *ngFor="let item of list; let i = index" class="draggable" [dndDraggable]="item">
                                  <td>{{ item.names}}</td>
                              </div>
                          </ng-template>
                          <div class="dropzone" dndDropzone (dndDrop)="onDrop($event, dropedItems)" style="border: 1px red solid;height:28px;">
                              <div style="border: 1px gray; border-radius: 5px; padding: 15px; background-color:gray"
                                    dndPlaceholderRef></div>
                               <ng-container *ngTemplateOutlet="recursiveList; context: { $implicit: dropedItems }"></ng-container>
                          </div>  -->


                          <!-- <td >
                              <div *ngFor="let cell of postFields;let i=index">
                              <div class="row" dndDropzone (dndDrop)="onDrop($event, listgetapi, i)" style="border: 1px red solid;height:28px;">
                                  <div [dndDraggable]="row" [dndEffectAllowed]="'move'" (dndMoved)="onDragged2(row, postFields, 'move')" >
                                      {{row.names}}
                                  </div>
                                  <div dndPlaceholderRef></div>
                              </div>
                          </div>
                          </td> -->


