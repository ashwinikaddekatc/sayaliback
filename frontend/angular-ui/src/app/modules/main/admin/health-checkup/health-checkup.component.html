<ol class="breadcrumb breadcrumb-arrow font-trirong">
    <li><a href="javascript://" [routerLink]="['/cns-portal/dashboard/order']"> <clr-icon shape="home"></clr-icon></a></li>
    <li><a href="javascript://"> <clr-icon shape="administrator"></clr-icon>  Admin</a></li>
    <li><a href="javascript://">Services</a></li>
  </ol>
  <br>
  
  <div class="dg-wrapper">
    <div class="clr-row">
      <div class="clr-col-8">
        <h3>Services Mesh</h3>
      </div>
      <div class="clr-col-4" style="text-align: right;">

        <button id="add"  class="btn btn-primary"(click)="goToAdd()" >
          <clr-icon shape="plus"></clr-icon>ADD
        </button>
      </div>
    </div>
    <clr-datagrid [clrDgLoading]="loading" [(clrDgSelected)]="selected">
  
      <clr-dg-placeholder><ng-template #loadingSpinner><clr-spinner>Loading ... </clr-spinner></ng-template>
        <div *ngIf="error;else loadingSpinner">{{error}}</div></clr-dg-placeholder>
      <clr-dg-column [clrDgField]="'ip'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Ip
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'port'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Port
     </ng-container> </clr-dg-column >
      <clr-dg-column [clrDgField]="'serviceName'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Service Name
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'file1'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        File Name 1
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'file2'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        File Name 2
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'file3'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        File Name 3
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'createDeployment'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Create Deployment
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'buildProject'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Build Project 
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'createProject'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Create Project 
      </ng-container></clr-dg-column>
      <clr-dg-column [clrDgField]="'deployApp'"> <ng-container *clrDgHideableColumn="{hidden: false}">
        Deploy App 
      </ng-container></clr-dg-column>
      <clr-dg-row *clrDgItems="let user of data" [clrDgItem]="user" >
        <clr-dg-cell>{{user.ip}}</clr-dg-cell>
        <clr-dg-cell>{{user.port}}</clr-dg-cell>
        <clr-dg-cell>{{user.serviceName}}</clr-dg-cell>
        <clr-dg-cell>{{user.file1}}</clr-dg-cell>
        <clr-dg-cell>{{user.file2}}</clr-dg-cell>
        <clr-dg-cell>{{user.file3}}</clr-dg-cell>
        <clr-dg-cell>{{user.createDeployment}}</clr-dg-cell>
        <clr-dg-cell>{{user.buildProject}}</clr-dg-cell>
        <clr-dg-cell>{{user.createProject}}</clr-dg-cell>
        <clr-dg-cell>{{user.deployApp}}</clr-dg-cell>
        <clr-dg-action-overflow>
          <button class="action-item" (click)="onEdit(user)">Edit<clr-icon shape="edit" class="is-error"></clr-icon></button>
          <button class="action-item" (click)="onDelete(user)">Delete<clr-icon shape="trash" class="is-error"></clr-icon></button>
        </clr-dg-action-overflow>
      </clr-dg-row>
      <clr-dg-footer>
        <clr-dg-pagination #pagination [clrDgPageSize]="10">
          <clr-dg-page-size [clrPageSizeOptions]="[10,20,50,100]">Users per page</clr-dg-page-size>
          {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
          of {{pagination.totalItems}} users
        </clr-dg-pagination>
      </clr-dg-footer>
    </clr-datagrid>
  </div>
  
  <clr-modal [(clrModalOpen)]="modalEdit" [clrModalSize]="'xl'" [clrModalStaticBackdrop]="true">
    <h3 class="modal-title">Health Checkup Edit</h3>
    <div class="modal-body" *ngIf="rowSelected.id">
      <h2 class="heading">{{rowSelected.id}}</h2>
  
      <form (ngSubmit)="onUpdate(rowSelected.id)">
        <div class="clr-row" style="margin-top: 10px;">
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">IP<span class="required-field">*</span></label>
            <input type="text" class="clr-input" name="ip" [(ngModel)]="rowSelected.ip"/>
          </div>
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">Port<span class="required-field">*</span></label>
            <input type="text" class="clr-input" name="port" [(ngModel)]="rowSelected.port" />
          </div>
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">Service Name<span class="required-field">*</span></label>
            <input type="text" class="clr-input"name="serviceName" [(ngModel)]="rowSelected.serviceName" />
          </div>
        </div>
          <div class="clr-row" style="margin-top: 10px;">
            <div class="clr-col-md-4 clr-col-sm-12">
              <label for="name">File Name 1</label>
              <input type="file" class="clr-input" style="padding-bottom: 35px;margin-top: 15px;" (change)="onFileChanged1($event)" >
            </div>
            <div class="clr-col-md-4 clr-col-sm-12">
              <label for="name">File Name 2</label>
              <input type="file" class="clr-input" style="padding-bottom: 35px;margin-top: 15px;" (change)="onFileChanged2($event)" >
            </div>
            <div class="clr-col-md-4 clr-col-sm-12">
              <label for="name">File Name 3</label>
              <input type="file" class="clr-input" style="padding-bottom: 35px;margin-top: 15px;" (change)="onFileChanged3($event)" >
            </div>
          </div>
          <div class="clr-row" style="margin-top: 10px;">
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Create Project</label>
            <div><input type="checkbox" clrCheckbox name="createProject" [(ngModel)]="rowSelected.createProject"/></div>
          </div>
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Build Project<span class="required-field">*</span></label>
            <div><input type="checkbox" clrCheckbox name="buildProject" [(ngModel)]="rowSelected.buildProject"/></div>
          </div>
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Create Deployment</label>
            <div><input type="checkbox" clrCheckbox name="createDeployment" [(ngModel)]="rowSelected.createDeployment" /></div>
          </div>
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Deploy App</label>
            <div><input type="checkbox" clrCheckbox name="deployApp" [(ngModel)]="rowSelected.deployApp"/></div>
          </div>
        </div>
        <br>
        <div class="modal-footer">
  
          <button type="button" class="btn btn-outline" (click)="modalEdit = false">Cancel</button>
          <button type="submit" class="btn btn-primary" >UPDATE</button>
          </div>
      </form>
  
    </div>
  </clr-modal>
  
  
  
  <clr-modal [(clrModalOpen)]="modaldelete" [clrModalSize]="'lg'" [clrModalStaticBackdrop]="true">
    <div class="modal-body" *ngIf="rowSelected.id">
      <h1 class="delete">Are You Sure Want to delete?</h1>
      <h2 class="heading">{{rowSelected.id}}</h2>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="modaldelete = false">Cancel</button>
      <button type="button" (click)="delete(rowSelected.id)" class="btn btn-primary" >Delete</button>
      </div>
    </div>
  </clr-modal>
  
  
  <clr-modal [(clrModalOpen)]="modalAdd" [clrModalSize]="'xl'" [clrModalStaticBackdrop]="true">
    <h3 class="modal-title">Create Health Checkup</h3>
    <div class="modal-body">
      <form [formGroup]="entryForm" (ngSubmit)="onSubmit()">
        <div class="clr-row">
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">IP<span class="required-field">*</span></label>
            <input type="text" class="clr-input"  formControlName="ip"/>
            <div *ngIf="submitted && entryForm.controls.ip.errors" class="error_mess">
                <div *ngIf="submitted && entryForm.controls.ip.errors.required" class="error_mess">*This field is Required</div>
            </div>
          </div>
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">Port<span class="required-field">*</span></label>
            <input type="text" class="clr-input" formControlName="port"/>
            <div *ngIf="submitted && entryForm.controls.port.errors" class="error_mess">
                <div *ngIf="submitted && entryForm.controls.port.errors.required" class="error_mess">*This field is Required</div>
            </div>
          </div>
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">Service Name<span class="required-field">*</span></label>
            <input type="text" class="clr-input" formControlName="serviceName"/>
            <div *ngIf="submitted && entryForm.controls.serviceName.errors" class="error_mess">
                <div *ngIf="submitted && entryForm.controls.serviceName.errors.required" class="error_mess">*This field is Required</div>
            </div>
          </div>
        </div>
        <div class="clr-row" style="margin-top: 10px;">
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">File Name 1</label>
            <input type="file" class="clr-input" style="padding-bottom: 35px;margin-top: 15px;" (change)="onFileChanged1($event)" >
          </div>
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">File Name 2</label>
            <input type="file" class="clr-input" style="padding-bottom: 35px;margin-top: 15px;" (change)="onFileChanged2($event)" >
          </div>
          <div class="clr-col-md-4 clr-col-sm-12">
            <label for="name">File Name 3</label>
            <input type="file" class="clr-input" style="padding-bottom: 35px;margin-top: 15px;" (change)="onFileChanged3($event)" >
          </div>
        </div>
        <div class="clr-row" style="margin-top: 10px;">
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Create Project</label>
            <div><input type="checkbox" clrCheckbox formControlName="createProject"/></div>
          </div>
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Build Project<span class="required-field">*</span></label>
            <div><input type="checkbox" clrCheckbox formControlName="buildProject"/></div>
          </div>
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Create Deployment</label>
            <div><input type="checkbox" clrCheckbox formControlName="createDeployment"/></div>
          </div>
          <div class="clr-col-md-3 clr-col-sm-12" style="margin-top: 15px;">
            <label for="name">Deploy App</label>
            <div><input type="checkbox" clrCheckbox formControlName="deployApp"/></div>
          </div>
        </div>
        <br>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline" (click)="modalAdd = false">Cancel</button>
          <button type="submit" class="btn btn-primary" >ADD</button>
          </div>
  </form>
    </div>
  </clr-modal>
<!--   
  <clr-modal [(clrModalOpen)]="modalDeploy" [clrModalSize]="'lg'" [clrModalStaticBackdrop]="true">
    <h3 class="modal-title">Health Checkup - {{checkData}}</h3>
    <div class="modal-body">
      <div class="clr-row">
      <div class="clr-col-md-4">
        <table class="table table-noborder">
        <tr *ngFor="let user of data; let i = index">
          <td class="td-title">{{user.serviceName}}</td>
          <td class="td-content">
            <ng-container *ngIf="user.deployApp">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
              </svg>
            </ng-container>
            <ng-container *ngIf="!user.deployApp">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
              </svg>
            </ng-container>
          </td>
        </tr>
      </table>
      </div>
      <div class="clr-col-md-6">
        <br>
        <span><b>Health status pass:</b> {{passCount}}/{{totalCount}}</span>
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline">{{getButtonLabel()}}</button>
      </div>
    </div>
  </clr-modal> -->